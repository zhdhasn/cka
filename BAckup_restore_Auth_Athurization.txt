kubent > kube no trouble

Cretae ECTD Backup:
ETCDCTL_API=3 etcdctl --endpoints=https://[127.0.0.1]:2379 --cacert=/etc/kubernetes/pki/etcd/ca.crt --cert=/etc/kubernetes/pki/etcd/server.crt --key=/etc/kubernetes/pki/etcd/server.key snapshot save /opt/snapshot.db

Verify Backup:
# ETCDCTL_API=3 etcdctl snapshot status /opt/snapshot.db
37b2ceda, 4665637, 1113, 5.0 MB

Restore ETCD:

# kubectl create deploy redis-dpl --image=redis --replicas=3

# ETCDCTL_API=3 etcdctl --data-dir /var/lib/etcd-from-backup snapshot restore /opt/snapshot.db

# vi /etc/kubernetes/manifests/etcd.yaml

- hostPath:
      path: /var/lib/etcd-from-backup

kubectl get pods

---------------------------------------------------------------------------------------------------
Add a new user:
adduser zarah

Create .key & .csr for this user:

openssl genrsa -out zarah.key 2048
openssl req -new -key zarah.key -out zarah.csr

cat zarah.csr

-----BEGIN CERTIFICATE REQUEST-----
MIICfTCCAWUCAQAwODELMAkGA1UEBhMCQkQxDDAKBgNVBAgMA0RISzENMAsGA1UE
CgwEU0VMRjEMMAoGA1UECwwDT1BTMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIB
CgKCAQEAtQDJb92+XVcyuB0OqTPeEi1MoOVAdWjQFBJPO2l/E0aQ5i18HJCLjhhH
8l7dA6E9QaP2cPtlfI/XeX/q/zhQd86I5Sg8X4QHIj0wfUq9Y7th8UlnNOPh2TOA
rBIiY0ILxTMVZeDJHRzQL613g7eY1MqA4O2IqKYSpofcb7ga5Fl4KUBQ6RW5J0gt
fHzyX6lskW/Ef+iFGO/NJZqnfh5uGwNmAItZim2RoY3+iCP0FCGtX9W5Iakicyd9
ywlk/OMh8PBEXS+TX7E7TrObOsdOLaveTZJ0/cyjqyEpfK/qZJI4JQrUEpY2x01A
Ga8CqNBclbdSDOtrJl0DuA3+VELD+QIDAQABoAAwDQYJKoZIhvcNAQELBQADggEB
AHep5YSCnV4h3vpIxK8IWJ6hQAmHIfAsGcQMbJ82YBbNMAmY34JAa5q/aNmyFj71
hb2Okp1yYMvSpl7NsOtmLAZG5HhWb8LREztGB9yKvwtXJdrfYs521rfWqAHQw1fq
mKq1HYByJIapVk1yFL18caRzjCzhLswZVq9Ha6UCKwK538Q4CKlTuLbAjxvtyJa2
HGMsHepFinrqn/F8zvaOdN1OWObZrocZ0LWoQoYYZuKaaryc5KJ0UyvguJw/mLEh
eLRCxvAaILzGu5EnkQGTK1QR9b8aPpuvnCnYXIvwgx7E0Seaj3R+7KFZ3uZ5XBgL
7uv3fZ8N5BX/8sLG9sWJAFA=
-----END CERTIFICATE REQUEST-----


Convert csr into base64 and print in a single line:

cat zarah.csr | base64 | tr -d "\n"


Now create kubernetes object to sigining the csr

cat <<EOF | kubectl apply -f -
apiVersion: certificates.k8s.io/v1
kind: CertificateSigningRequest
metadata:
  name: zarah
spec:
  request: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURSBSRVFVRVNULS0tLS0KTUlJQ2ZUQ0NBV1VDQVFBd09ERUxNQWtHQTFVRUJoTUNRa1F4RERBS0JnTlZCQWdNQTBSSVN6RU5NQXNHQTFVRQpDZ3dFVTBWTVJqRU1NQW9HQTFVRUN3d0RUMUJUTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCCkNnS0NBUUVBdFFESmI5MitYVmN5dUIwT3FUUGVFaTFNb09WQWRXalFGQkpQTzJsL0UwYVE1aTE4SEpDTGpoaEgKOGw3ZEE2RTlRYVAyY1B0bGZJL1hlWC9xL3poUWQ4Nkk1U2c4WDRRSElqMHdmVXE5WTd0aDhVbG5OT1BoMlRPQQpyQklpWTBJTHhUTVZaZURKSFJ6UUw2MTNnN2VZMU1xQTRPMklxS1lTcG9mY2I3Z2E1Rmw0S1VCUTZSVzVKMGd0CmZIenlYNmxza1cvRWYraUZHTy9OSlpxbmZoNXVHd05tQUl0WmltMlJvWTMraUNQMEZDR3RYOVc1SWFraWN5ZDkKeXdsay9PTWg4UEJFWFMrVFg3RTdUck9iT3NkT0xhdmVUWkowL2N5anF5RXBmSy9xWkpJNEpRclVFcFkyeDAxQQpHYThDcU5CY2xiZFNET3RySmwwRHVBMytWRUxEK1FJREFRQUJvQUF3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCCkFIZXA1WVNDblY0aDN2cEl4SzhJV0o2aFFBbUhJZkFzR2NRTWJKODJZQmJOTUFtWTM0SkFhNXEvYU5teUZqNzEKaGIyT2twMXlZTXZTcGw3TnNPdG1MQVpHNUhoV2I4TFJFenRHQjl5S3Z3dFhKZHJmWXM1MjFyZldxQUhRdzFmcQptS3ExSFlCeUpJYXBWazF5RkwxOGNhUnpqQ3poTHN3WlZxOUhhNlVDS3dLNTM4UTRDS2xUdUxiQWp4dnR5SmEyCkhHTXNIZXBGaW5ycW4vRjh6dmFPZE4xT1dPYlpyb2NaMExXb1FvWVladUthYXJ5YzVLSjBVeXZndUp3L21MRWgKZUxSQ3h2QWFJTHpHdTVFbmtRR1RLMVFSOWI4YVBwdXZuQ25ZWEl2d2d4N0UwU2VhajNSKzdLRlozdVo1WEJnTAo3dXYzZlo4TjVCWC84c0xHOXNXSkFGQT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUgUkVRVUVTVC0tLS0tCg==
  signerName: kubernetes.io/kube-apiserver-client
  expirationSeconds: 2592000  # one day
  usages:
  - client auth
  - digital signature
  - key encipherment
EOF


vi kabila-csr.yaml

apiVersion: certificates.k8s.io/v1
kind: CertificateSigningRequest
metadata:
  name: zarah
spec:
  request: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURSBSRVFVRVNULS0tLS0KTUlJQ2ZUQ0NBV1VDQVFBd09ERUxNQWtHQTFVRUJoTUNRa1F4RERBS0JnTlZCQWdNQTBSSVN6RU5NQXNHQTFVRQpDZ3dFVTBWTVJqRU1NQW9HQTFVRUN3d0RUMUJUTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCCkNnS0NBUUVBdFFESmI5MitYVmN5dUIwT3FUUGVFaTFNb09WQWRXalFGQkpQTzJsL0UwYVE1aTE4SEpDTGpoaEgKOGw3ZEE2RTlRYVAyY1B0bGZJL1hlWC9xL3poUWQ4Nkk1U2c4WDRRSElqMHdmVXE5WTd0aDhVbG5OT1BoMlRPQQpyQklpWTBJTHhUTVZaZURKSFJ6UUw2MTNnN2VZMU1xQTRPMklxS1lTcG9mY2I3Z2E1Rmw0S1VCUTZSVzVKMGd0CmZIenlYNmxza1cvRWYraUZHTy9OSlpxbmZoNXVHd05tQUl0WmltMlJvWTMraUNQMEZDR3RYOVc1SWFraWN5ZDkKeXdsay9PTWg4UEJFWFMrVFg3RTdUck9iT3NkT0xhdmVUWkowL2N5anF5RXBmSy9xWkpJNEpRclVFcFkyeDAxQQpHYThDcU5CY2xiZFNET3RySmwwRHVBMytWRUxEK1FJREFRQUJvQUF3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCCkFIZXA1WVNDblY0aDN2cEl4SzhJV0o2aFFBbUhJZkFzR2NRTWJKODJZQmJOTUFtWTM0SkFhNXEvYU5teUZqNzEKaGIyT2twMXlZTXZTcGw3TnNPdG1MQVpHNUhoV2I4TFJFenRHQjl5S3Z3dFhKZHJmWXM1MjFyZldxQUhRdzFmcQptS3ExSFlCeUpJYXBWazF5RkwxOGNhUnpqQ3poTHN3WlZxOUhhNlVDS3dLNTM4UTRDS2xUdUxiQWp4dnR5SmEyCkhHTXNIZXBGaW5ycW4vRjh6dmFPZE4xT1dPYlpyb2NaMExXb1FvWVladUthYXJ5YzVLSjBVeXZndUp3L21MRWgKZUxSQ3h2QWFJTHpHdTVFbmtRR1RLMVFSOWI4YVBwdXZuQ25ZWEl2d2d4N0UwU2VhajNSKzdLRlozdVo1WEJnTAo3dXYzZlo4TjVCWC84c0xHOXNXSkFGQT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUgUkVRVUVTVC0tLS0tCg==
  signerName: kubernetes.io/kube-apiserver-client
  expirationSeconds: 2592000  # one day
  usages:
  - client auth
  - digital signature
  - key encipherment
  
kubectl apply -f kabila-csr.yaml

kubectl get csr
NAME    AGE    SIGNERNAME                            REQUESTOR          REQUESTEDDURATION   CONDITION
zarah   100s   kubernetes.io/kube-apiserver-client   kubernetes-admin   30d                 Pending


kubectl certificate approve zarah

kubectl get csr
NAME    AGE     SIGNERNAME                            REQUESTOR          REQUESTEDDURATION   CONDITION
zarah   2m54s   kubernetes.io/kube-apiserver-client   kubernetes-admin   30d                 Approved,Issued

kubectl describe csr zarah

kubectl get csr zarah -o jsonpath='{.status.certificate}'| base64 -d > zarah.crt

----------------------------------------------------------------------------------------------------------------------------------------------
root@cka-master:~/zarah# cat ../.kube/config
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJek1ESXhNakUzTVRFd00xb1hEVE16TURJd09URTNNVEV3TTFvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTUloCjdMQlhrMnkvdGljYjhmVDJFRThvS3JZbFhWY25ESFM5dHlrb2MvWjZMdFExNWZESWdyZm52c3RTaUdhbEgrTkYKVEU4NmdHckxKUTdtSFJINWh1dmlqU1crRWxvNHQ1dTZRTWZLMkJrdkRKMWZlWTdEblUveHVGaEw3M3lzVzZ6Swp3VnR5YlFObVNHNjdrWWZCRHlmZWVuNHlkRzk2SmFQajhNb2MxYkdibUlmKzV2V203SnJMMEdudGdYRCtGcmpvCmZDc3VsWXIreU94ZmYwOWI5MFRhQ1J1Q1QxMnpJTVlPNklEUVRXZXhlNUYzdU1xS3dVSDNnM2xnWEhnRWRZQnYKalRucDRtS2gvSlhaSk5lMlRmZ1ducFNGQWdpbHE1Vk4xcjVDWGZlQXQ5cFhrY3pYNEdrOEhoV0FkOVFiVjNKQwp3dnUzWkVLRGpDOWRldVFtdzFzQ0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZIVk9YWkRXZ24yTlN6ZDJNNDlqdnVwamNIWmdNQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBRW9jMGd2ZzlBbWhlTEgvZEpYcQpmY014RTVucDd1NGFtbWhmc1llbHc1aXd3dGFzMk56dGVIOGZrU3BXL0IzdUZXajNrZnVJSnUrWmwxd1pGaVBDCnFGQVU1em9JY1VTZlhFTHoyamJEYkpxaFpnb1V2bkkzL0hyMmorckZxNCtKa0xwQTN0anZESENtd2xVa2k4TmIKVjMzVENtRHd1QjVzSTJ1YXdBMHk5VHJZNUczNWRSVlhxUXRyaUViMEdHSlZrU3lETTY3MzAyTkxYSXNyVVJrdwplVzNnSkRtRmhxU1o1NnFQZXpDSXE4QVI0QWpENXpkQTlpVjFJTlpHckl3LzlaM0N6QUhNQ1ZTdSt1aXc1aEIvClAxMFZYcG1zQ1dDYWtnd3BXQVN3SVhMQjU1QkEySGF5NXI0dUlkNHhuTmZyMWRCRldVQXZuUEVPNDZES2d4elcKR2tBPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    server: https://103.204.200.75:6443
  name: kubernetes
contexts:
- context:
    cluster: kubernetes
    user: kubernetes-admin
  name: kubernetes-admin@kubernetes
current-context: kubernetes-admin@kubernetes
kind: Config
preferences: {}
users:
- name: kubernetes-admin
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJVENDQWdtZ0F3SUJBZ0lJUUI2anc1ZEtnRUV3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TXpBeU1USXhOekV4TUROYUZ3MHlOREF5TVRJeE56RXhNRGRhTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQTFYVjB2Y1A4QUxoT0dmYmoKc2liMHc5UTZhb09UU2RZVXI4ejdQdXphMDRkVDN3NTB1ejhpU0pzY2cwV2xMQVBvbEE4UkFROSt2L1Rsb0NyQwphM1RGc3JnQmNoQ0MxUW1yOWF4RVo4cjVVdm0xNC9zNTgzSWZnNW0rQklEZmhHa2F2eDlwK2tYVjlZbTRzL1d2CkNwNmlhQzV3WTVFQWxjSndiOEw0K2tnYUliMVdlTzhOd0QrcE83cE1wNkpYNHNFdHRsT2l4WVNyYzQ2cFNleWEKMXVaK1k0d1Q5NW8yclBnMEUzZ1NieG1QekhZcmU3VFhJQkxkMUdiZ3ovTS85V1Z0SFYyeTBaV3ZiYkFNNnNDMAppVVZrdWVpVU1hMnJSS2lzWW1sMEVGYk9WcndLcDdKQ2FaN2laUjRzT0NLeGJDUHBiemc2blVzcjNaV1B6eDlJCk42cHhJUUlEQVFBQm8xWXdWREFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUVHREFXZ0JSMVRsMlExb0o5alVzM2RqT1BZNzdxWTNCMgpZREFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBa1N0M0NudG16UFRQOTkrck1hOEtYSkpYQXorcHQzOHo3OGcvCjZLbFhOa1JucHRUV25oUFFzclhmdE5OUzdBaTB0UEdpKzZPV093UDNET2taVVJtaFYvYlozdm43ZjY2U3hNUWkKNjlhNHNqWERKeW1LZDkvU0NaT0hNZjc5cm9NeE1Rb3RhcmZ0T1BrRWZUU1lsbXBOcnRrWUd1MFJ5RHNoeDAvVgpManFSbEdnRng4czViZDJrYmN1TjN1R3NxQzdQMnkxQ2dJWUJqYkdpTkpad3FnOHBFN2lyeWlpaEMvM09WZWlGCnVKLzVSL2prVjZiTUlZTDdKQXhVVkc4STU1L3FJblRiNEZQcnpybVpXK3ZWZk93S1BKSnNucG1zSWcvMU9tYVgKUU9NNG1MeWY3WGoxWEx1WjNqSFIralMzRGZQVkdJckRhbkRCSW5TQWVkVjdnbTBOdkE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBMVhWMHZjUDhBTGhPR2ZianNpYjB3OVE2YW9PVFNkWVVyOHo3UHV6YTA0ZFQzdzUwCnV6OGlTSnNjZzBXbExBUG9sQThSQVE5K3YvVGxvQ3JDYTNURnNyZ0JjaENDMVFtcjlheEVaOHI1VXZtMTQvczUKODNJZmc1bStCSURmaEdrYXZ4OXAra1hWOVltNHMvV3ZDcDZpYUM1d1k1RUFsY0p3YjhMNCtrZ2FJYjFXZU84Tgp3RCtwTzdwTXA2Slg0c0V0dGxPaXhZU3JjNDZwU2V5YTF1WitZNHdUOTVvMnJQZzBFM2dTYnhtUHpIWXJlN1RYCklCTGQxR2Jnei9NLzlXVnRIVjJ5MFpXdmJiQU02c0MwaVVWa3VlaVVNYTJyUktpc1ltbDBFRmJPVnJ3S3A3SkMKYVo3aVpSNHNPQ0t4YkNQcGJ6ZzZuVXNyM1pXUHp4OUlONnB4SVFJREFRQUJBb0lCQUFVSVBOVlFibnR4M04xOQoxWVpZcHNLTEdVbHppcUJkL0tUY1Z6djNoMzBmSHBvT2xDL3A0QndJRkJjQUtGR3VVZWhUcHBuNHpJc244ZFhoCnpDMk9WaTdOYWJOUHNsWGxZWGxzTXp5aksxZUtiWUJQWnVGWFdtalcwZ1QzS00zTlVJVWE3M3VuODlCVEM5aXEKUFJNcUJEZ2lpQ0hBeEZ2RGRyVWJ5cFRUNkZITlF0Zmp3blRDaHNmVzdSKzhYUitoL3MxVFJkK2R2cS9zUGk2MQpyRVdxbWFvM3JzSkhVK0twa2M3M2dLUXE5SS94U1JkdlYrNUpaU2hUcExnOVpTRkk5UThCcnVUcCtaSVY0T215CmdJQWhxVkFrckhtdHJ3YVQ5N0Vpemt6eXVYOFdPSVB2YzdwbStkbmZpdWVicm51aVM5WERnRDNuTVFNQ0JjRXkKUTJLMG5MRUNnWUVBOXI5Q3d4cDh6VVBpUE1BMFRvMytoMUVWWEE3aUUzTkt2V1Awb0x2djNpWmdBeVc5MkhzcwoxOWM4MTgwU0dkN0NHbUFuajJYOWlncjRpemljS2NuSHM2ZkswbHNINEprcUlRK0kyeVh2bGhIV2NDbVhrbG5DClVGbzhkOHV0TFRrWkl0SkUvSDlaeTF5ZHdLcStrMzFPQ2lXNG5Ua3hHWGplc0JXVnI1R1hwQjBDZ1lFQTNYYWgKeTZOeHZwUlBOQlRxVk9PU0IzQ3A4Zyt0VUU5UVZNcW5IdFZrYldhSjJucGI3VEVPWTVwTGlEdXlMQXVOeVJPRwp3ZWZ0VWkwTUVhemNrMzFLS0NacDkyVlg0R0pJeDZPa0xuTmhmM3grdkJUNzkyZFdxQkcwSHZCOEo3RW5CL1ByCmxzeCtZUFZob3pOOG4vT3RYVjhtSTE4NWtYTDFZVzJsVmpXN2FkVUNnWUJ2YjhXWkU3ZFZoTmtDRXRRTXZqZzcKcUxUNjFJWHB2dUg4VXM1Q1lWNWRkL3RZc0l6aTNnNU1sSnFYNDdmUEV6bWFhOTZ4OXAvZzNqK05zTTFtV2dqawo3RnkvVC9sb3lBT3MxclU2TkJIV05zd2Y3OGpTZ2RNdU12S29MOFpRYkQ4YjZOYmJLakRGbFZoeGtTdHN0T1N2CjFJVmlERmhPWnJZNzFDTzhIUWJkU1FLQmdRQ2VBVlB5WEV4ODhvZUgyeHhOTUlneGNycHRqNjNSektTOXVsQjkKK1RYTHNBck9xOW9HWXFlbmZLQkROSVFzVkpuMlNrNHM3bkl0M1NIdFFtMmxkUkNCa05hdHdjcHV0dkRDTHdpbQpjMyt1VzM1NFptaFczWTNBSDlGbytaODdHbk9FZ3cwazdBV0cyOHVyaXNKeHhJTitTTEtITGh0K29JeGQxTUxQCnZVcFhlUUtCZ1FDMjFZWEMxbFVreFUvRHl3WWxpNTZJK2Z2WndqRFRtYVhpV0Njckhnci83SFRSemEvVloyc0IKc0FOakxoUTlINnVYQjQ1aXB6UjdlbzhrTnlnYmlhbC9mZjZhUXFCMXRsVHJMMVhtcEVSdk5rM0tzakZ4cTU4cwovbUlKNzhrM29Nam5odlZqZWczcTlnemR2WFlGd1p2YlhYdis4MWVXSWkwSHpmM2VzUEVBN3c9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
	
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

kubectl config set-credentials zarah --client-key=zarah.key --client-certificate=zarah.crt --embed-certs=true

kubectl config set-context zarah@kubernetes --cluster=kubernetes --user=zarah



apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJek1ESXhNakUzTVRFd00xb1hEVE16TURJd09URTNNVEV3TTFvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTUloCjdMQlhrMnkvdGljYjhmVDJFRThvS3JZbFhWY25ESFM5dHlrb2MvWjZMdFExNWZESWdyZm52c3RTaUdhbEgrTkYKVEU4NmdHckxKUTdtSFJINWh1dmlqU1crRWxvNHQ1dTZRTWZLMkJrdkRKMWZlWTdEblUveHVGaEw3M3lzVzZ6Swp3VnR5YlFObVNHNjdrWWZCRHlmZWVuNHlkRzk2SmFQajhNb2MxYkdibUlmKzV2V203SnJMMEdudGdYRCtGcmpvCmZDc3VsWXIreU94ZmYwOWI5MFRhQ1J1Q1QxMnpJTVlPNklEUVRXZXhlNUYzdU1xS3dVSDNnM2xnWEhnRWRZQnYKalRucDRtS2gvSlhaSk5lMlRmZ1ducFNGQWdpbHE1Vk4xcjVDWGZlQXQ5cFhrY3pYNEdrOEhoV0FkOVFiVjNKQwp3dnUzWkVLRGpDOWRldVFtdzFzQ0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZIVk9YWkRXZ24yTlN6ZDJNNDlqdnVwamNIWmdNQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBRW9jMGd2ZzlBbWhlTEgvZEpYcQpmY014RTVucDd1NGFtbWhmc1llbHc1aXd3dGFzMk56dGVIOGZrU3BXL0IzdUZXajNrZnVJSnUrWmwxd1pGaVBDCnFGQVU1em9JY1VTZlhFTHoyamJEYkpxaFpnb1V2bkkzL0hyMmorckZxNCtKa0xwQTN0anZESENtd2xVa2k4TmIKVjMzVENtRHd1QjVzSTJ1YXdBMHk5VHJZNUczNWRSVlhxUXRyaUViMEdHSlZrU3lETTY3MzAyTkxYSXNyVVJrdwplVzNnSkRtRmhxU1o1NnFQZXpDSXE4QVI0QWpENXpkQTlpVjFJTlpHckl3LzlaM0N6QUhNQ1ZTdSt1aXc1aEIvClAxMFZYcG1zQ1dDYWtnd3BXQVN3SVhMQjU1QkEySGF5NXI0dUlkNHhuTmZyMWRCRldVQXZuUEVPNDZES2d4elcKR2tBPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    server: https://103.204.200.75:6443
  name: kubernetes
contexts:

- context:
    cluster: kubernetes
    user: zarah
  name: zarah@kubernetes
current-context: zarah@kubernetes
kind: Config
preferences: {}
users:

- name: zarah
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURMakNDQWhhZ0F3SUJBZ0lSQVBObUFVcUhqQ093eVZlRStlV3dCNHd3RFFZSktvWklodmNOQVFFTEJRQXcKRlRFVE1CRUdBMVVFQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TXpBME1qVXdOak00TlRaYUZ3MHlNekExTWpVdwpOak00TlRaYU1EZ3hDekFKQmdOVkJBWVRBa0pFTVF3d0NnWURWUVFJRXdORVNFc3hEVEFMQmdOVkJBb1RCRk5GClRFWXhEREFLQmdOVkJBc1RBMDlRVXpDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUIKQUxVQXlXL2R2bDFYTXJnZERxa3ozaEl0VEtEbFFIVm8wQlFTVHp0cGZ4TkdrT1l0ZkJ5UWk0NFlSL0plM1FPaApQVUdqOW5EN1pYeVAxM2wvNnY4NFVIZk9pT1VvUEYrRUJ5STlNSDFLdldPN1lmRkpaelRqNGRremdLd1NJbU5DCkM4VXpGV1hneVIwYzBDK3RkNE8zbU5US2dPRHRpS2ltRXFhSDNHKzRHdVJaZUNsQVVPa1Z1U2RJTFh4ODhsK3AKYkpGdnhIL29oUmp2elNXYXAzNGViaHNEWmdDTFdZcHRrYUdOL29najlCUWhyVi9WdVNHcEluTW5mY3NKWlB6agpJZkR3UkYwdmsxK3hPMDZ6bXpySFRpMnIzazJTZFAzTW82c2hLWHl2Nm1TU09DVUsxQktXTnNkTlFCbXZBcWpRClhKVzNVZ3pyYXlaZEE3Z04vbFJDdy9rQ0F3RUFBYU5XTUZRd0RnWURWUjBQQVFIL0JBUURBZ1dnTUJNR0ExVWQKSlFRTU1Bb0dDQ3NHQVFVRkJ3TUNNQXdHQTFVZEV3RUIvd1FDTUFBd0h3WURWUjBqQkJnd0ZvQVVkVTVka05hQwpmWTFMTjNZemoyTys2bU53ZG1Bd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFESmtDTHl6QlJaMVBEekt2emhmCmdhWnVHbmVhTUlDRGxFa3pLd3lxTHd6WTc1SVZGMHFKd2x0U3p1T3BXNlNLclBCVVJuYjB2S1o4azJ4ZzE3U28KaStTTE41b2habFgvcS9ZcStrakpGbGcrY2V6eDNIK0xnVElVaENleHIwNHc0UUtGZkg5ZWIybE42Q1ZQckpuMwo3RHAxdEtIZUpMV1FEcER0WUw2c3VtblpmVDdwS2IzSHhBS3Z4QXJqa01JL3RERWRRZDhpNEtlQThXQzY1c0hDCi8ycW9ENE5aakgvZ3NydllnMkFyZVNUNktSSkdmcFVZamx3b0dpVWxQanExODMrd1FtczJxTVhZZnBPN21mTGoKMFQ0ZGNIMWtIU3lvVEFGenRCTGZjQnZSSkZPczltZ051aFNFUjBFcDB5NWVGVXp1V2F0TUxGbktuejdiaStRQgpLeVU9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBdFFESmI5MitYVmN5dUIwT3FUUGVFaTFNb09WQWRXalFGQkpQTzJsL0UwYVE1aTE4CkhKQ0xqaGhIOGw3ZEE2RTlRYVAyY1B0bGZJL1hlWC9xL3poUWQ4Nkk1U2c4WDRRSElqMHdmVXE5WTd0aDhVbG4KTk9QaDJUT0FyQklpWTBJTHhUTVZaZURKSFJ6UUw2MTNnN2VZMU1xQTRPMklxS1lTcG9mY2I3Z2E1Rmw0S1VCUQo2Ulc1SjBndGZIenlYNmxza1cvRWYraUZHTy9OSlpxbmZoNXVHd05tQUl0WmltMlJvWTMraUNQMEZDR3RYOVc1Cklha2ljeWQ5eXdsay9PTWg4UEJFWFMrVFg3RTdUck9iT3NkT0xhdmVUWkowL2N5anF5RXBmSy9xWkpJNEpRclUKRXBZMngwMUFHYThDcU5CY2xiZFNET3RySmwwRHVBMytWRUxEK1FJREFRQUJBb0lCQUQ0VXJRSnZYYkdLRE4xVgpLZ2dpd0JJZjgxNWtBdjNDRzB3bkU0SGZKelNuU1YrSlRqNUYzWGU1SUVRakFVOFRhSDB4RFgrbTJpSWsrOVN5CmFSbHNhVDBPVzZtdGFUZWhnd2pkVDlwSlhqZnN0eVVZOWdzUDloQ1hONVROQzNwYjFzbW1RYnFWcEtVVmt0b24KZHd4NFZqVDExOHBON2tkWjNwKzdqWUhMOVgxSUZ0ZWM4YUJpajcxUHZ3ZGF0YmlUbG1ETmJRM1dIYWxkSVErOApJeVhseVYwV1RqRTY3RkZXUVBhb290VTF1ZFc5dTd6OVBoVkVORDcrMTRVSjJ5MzJoQmgvUnA2bzlCeHd1bDd6CnRLbk11QmtUUVRZRlJ0cEdxaVR0K0pvQmJDMUU4WHJIT0w3MDZ2Qk03TlFpcWF0cjJ2MG0xZ1o2eS9hZ2ROR1UKWkF5NEIva0NnWUVBM0pxaUVIVkVkRUZQOWVEazV2NGNpekZvaE9iU2lhR0t4NzZleEhyRkpzcWczRnRzd3paTwpySytMejVEL2ticU5vL2tVOGtEY2FybEdsaUVpU3M2ZW5idTFsQmR5QmtISFdON2RDOWpnSUNyZnRHUWY4cG5VCitJa3diQlRNYVB0YUpCWndoREZvTnpKYk9vdHVnYmNkYTVxeXhpWVkxakQzWjNzNnI1SWhKS01DZ1lFQTBndUkKd2hhekZrdmNWVklBY2gzL3lKeDF5blhFVkZuMDUxOExLUjl5S1E0YTdyRldwZ3JXZ01JUTFkdzhNcWpDU0JtNgo0MUpqc2RYemdqQ1lXMW1qM1I3N2cwOUtDVDE1WUNhK1FySHpqSndOMmduUEhUR1dvVkhvd0F4ZCt0VHNNbVo0CnZqREt3YTQ2OTFwZXI4QnB4amNQNWpOa2JGb3ZHL21wb09IdG9yTUNnWUVBaTE2MkhLZTVnNmp2bDJ0cHNmWEEKbXIrd1JLWi9SS3htUFNOVXN0VE5VV0NhbUJ5NmJlb1Zja3ZGakhFU3hVS1MwWkUvaG4wcnc5RWhveDl6eHNjYQp0cFFzZDA4SW5xTllDZkZpdldWYTAzZkN0UGk4cGt4Qm5ITXZ3Rml6ZTIrdzF6UEdDZjRjMVNKZk9IRjJjMFQ0CnRVNmF1MHkrVERQTFdma2tibDlueVBrQ2dZQURKMWt1VU5qdmhNUVNJK0VOMVpWNWxaL1BJbVdJUHJHR3A4NnIKRjJYSGFBYlBmcW9tWkJORWE2V0ZFSUYyNFVISmcxbGpBR0d1MGQrT0hOeXN3blBMWmlPd25RZ25pMXkvTE5XKwplcDJGaHZKT1M4ZG9VTTVLTGNpbzJZYXZ0WEsyYndOeEY1cHp2Z0gwcE02M0pOUnh2WEhucXUzZkVwdVNkL1VzCkRUaGNNUUtCZ0Qza0dWanJ4cjM1QkdyM3ZxTjNlZk4xeWJhaHZsVFhSZ05Pb3cxcDNBM0JqL2d5Y25NbHJZdlgKZzc2SG9WbC9GTngxU1JzVHR4WHZ5VXRSY2g3Z1pYQll2bHNuRlZYWXNQUCtCeU1WenRnbmZ0V0w4VWhsY1VQeApjUmx2VzdlZDFQZkxLK2UxOG9mYWZPV05vcnR4UGhjb1pENkJMcFVCRmpZL1V3YktwQWR5Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==


su - zarah
mkdir .kube
vi .kube/config

apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJek1ESXhNakUzTVRFd00xb1hEVE16TURJd09URTNNVEV3TTFvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTUloCjdMQlhrMnkvdGljYjhmVDJFRThvS3JZbFhWY25ESFM5dHlrb2MvWjZMdFExNWZESWdyZm52c3RTaUdhbEgrTkYKVEU4NmdHckxKUTdtSFJINWh1dmlqU1crRWxvNHQ1dTZRTWZLMkJrdkRKMWZlWTdEblUveHVGaEw3M3lzVzZ6Swp3VnR5YlFObVNHNjdrWWZCRHlmZWVuNHlkRzk2SmFQajhNb2MxYkdibUlmKzV2V203SnJMMEdudGdYRCtGcmpvCmZDc3VsWXIreU94ZmYwOWI5MFRhQ1J1Q1QxMnpJTVlPNklEUVRXZXhlNUYzdU1xS3dVSDNnM2xnWEhnRWRZQnYKalRucDRtS2gvSlhaSk5lMlRmZ1ducFNGQWdpbHE1Vk4xcjVDWGZlQXQ5cFhrY3pYNEdrOEhoV0FkOVFiVjNKQwp3dnUzWkVLRGpDOWRldVFtdzFzQ0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZIVk9YWkRXZ24yTlN6ZDJNNDlqdnVwamNIWmdNQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBRW9jMGd2ZzlBbWhlTEgvZEpYcQpmY014RTVucDd1NGFtbWhmc1llbHc1aXd3dGFzMk56dGVIOGZrU3BXL0IzdUZXajNrZnVJSnUrWmwxd1pGaVBDCnFGQVU1em9JY1VTZlhFTHoyamJEYkpxaFpnb1V2bkkzL0hyMmorckZxNCtKa0xwQTN0anZESENtd2xVa2k4TmIKVjMzVENtRHd1QjVzSTJ1YXdBMHk5VHJZNUczNWRSVlhxUXRyaUViMEdHSlZrU3lETTY3MzAyTkxYSXNyVVJrdwplVzNnSkRtRmhxU1o1NnFQZXpDSXE4QVI0QWpENXpkQTlpVjFJTlpHckl3LzlaM0N6QUhNQ1ZTdSt1aXc1aEIvClAxMFZYcG1zQ1dDYWtnd3BXQVN3SVhMQjU1QkEySGF5NXI0dUlkNHhuTmZyMWRCRldVQXZuUEVPNDZES2d4elcKR2tBPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    server: https://103.204.200.75:6443
  name: kubernetes
contexts:

- context:
    cluster: kubernetes
    user: zarah
  name: zarah@kubernetes
current-context: zarah@kubernetes
kind: Config
preferences: {}
users:

- name: zarah
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURMakNDQWhhZ0F3SUJBZ0lSQVBObUFVcUhqQ093eVZlRStlV3dCNHd3RFFZSktvWklodmNOQVFFTEJRQXcKRlRFVE1CRUdBMVVFQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TXpBME1qVXdOak00TlRaYUZ3MHlNekExTWpVdwpOak00TlRaYU1EZ3hDekFKQmdOVkJBWVRBa0pFTVF3d0NnWURWUVFJRXdORVNFc3hEVEFMQmdOVkJBb1RCRk5GClRFWXhEREFLQmdOVkJBc1RBMDlRVXpDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUIKQUxVQXlXL2R2bDFYTXJnZERxa3ozaEl0VEtEbFFIVm8wQlFTVHp0cGZ4TkdrT1l0ZkJ5UWk0NFlSL0plM1FPaApQVUdqOW5EN1pYeVAxM2wvNnY4NFVIZk9pT1VvUEYrRUJ5STlNSDFLdldPN1lmRkpaelRqNGRremdLd1NJbU5DCkM4VXpGV1hneVIwYzBDK3RkNE8zbU5US2dPRHRpS2ltRXFhSDNHKzRHdVJaZUNsQVVPa1Z1U2RJTFh4ODhsK3AKYkpGdnhIL29oUmp2elNXYXAzNGViaHNEWmdDTFdZcHRrYUdOL29najlCUWhyVi9WdVNHcEluTW5mY3NKWlB6agpJZkR3UkYwdmsxK3hPMDZ6bXpySFRpMnIzazJTZFAzTW82c2hLWHl2Nm1TU09DVUsxQktXTnNkTlFCbXZBcWpRClhKVzNVZ3pyYXlaZEE3Z04vbFJDdy9rQ0F3RUFBYU5XTUZRd0RnWURWUjBQQVFIL0JBUURBZ1dnTUJNR0ExVWQKSlFRTU1Bb0dDQ3NHQVFVRkJ3TUNNQXdHQTFVZEV3RUIvd1FDTUFBd0h3WURWUjBqQkJnd0ZvQVVkVTVka05hQwpmWTFMTjNZemoyTys2bU53ZG1Bd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFESmtDTHl6QlJaMVBEekt2emhmCmdhWnVHbmVhTUlDRGxFa3pLd3lxTHd6WTc1SVZGMHFKd2x0U3p1T3BXNlNLclBCVVJuYjB2S1o4azJ4ZzE3U28KaStTTE41b2habFgvcS9ZcStrakpGbGcrY2V6eDNIK0xnVElVaENleHIwNHc0UUtGZkg5ZWIybE42Q1ZQckpuMwo3RHAxdEtIZUpMV1FEcER0WUw2c3VtblpmVDdwS2IzSHhBS3Z4QXJqa01JL3RERWRRZDhpNEtlQThXQzY1c0hDCi8ycW9ENE5aakgvZ3NydllnMkFyZVNUNktSSkdmcFVZamx3b0dpVWxQanExODMrd1FtczJxTVhZZnBPN21mTGoKMFQ0ZGNIMWtIU3lvVEFGenRCTGZjQnZSSkZPczltZ051aFNFUjBFcDB5NWVGVXp1V2F0TUxGbktuejdiaStRQgpLeVU9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBdFFESmI5MitYVmN5dUIwT3FUUGVFaTFNb09WQWRXalFGQkpQTzJsL0UwYVE1aTE4CkhKQ0xqaGhIOGw3ZEE2RTlRYVAyY1B0bGZJL1hlWC9xL3poUWQ4Nkk1U2c4WDRRSElqMHdmVXE5WTd0aDhVbG4KTk9QaDJUT0FyQklpWTBJTHhUTVZaZURKSFJ6UUw2MTNnN2VZMU1xQTRPMklxS1lTcG9mY2I3Z2E1Rmw0S1VCUQo2Ulc1SjBndGZIenlYNmxza1cvRWYraUZHTy9OSlpxbmZoNXVHd05tQUl0WmltMlJvWTMraUNQMEZDR3RYOVc1Cklha2ljeWQ5eXdsay9PTWg4UEJFWFMrVFg3RTdUck9iT3NkT0xhdmVUWkowL2N5anF5RXBmSy9xWkpJNEpRclUKRXBZMngwMUFHYThDcU5CY2xiZFNET3RySmwwRHVBMytWRUxEK1FJREFRQUJBb0lCQUQ0VXJRSnZYYkdLRE4xVgpLZ2dpd0JJZjgxNWtBdjNDRzB3bkU0SGZKelNuU1YrSlRqNUYzWGU1SUVRakFVOFRhSDB4RFgrbTJpSWsrOVN5CmFSbHNhVDBPVzZtdGFUZWhnd2pkVDlwSlhqZnN0eVVZOWdzUDloQ1hONVROQzNwYjFzbW1RYnFWcEtVVmt0b24KZHd4NFZqVDExOHBON2tkWjNwKzdqWUhMOVgxSUZ0ZWM4YUJpajcxUHZ3ZGF0YmlUbG1ETmJRM1dIYWxkSVErOApJeVhseVYwV1RqRTY3RkZXUVBhb290VTF1ZFc5dTd6OVBoVkVORDcrMTRVSjJ5MzJoQmgvUnA2bzlCeHd1bDd6CnRLbk11QmtUUVRZRlJ0cEdxaVR0K0pvQmJDMUU4WHJIT0w3MDZ2Qk03TlFpcWF0cjJ2MG0xZ1o2eS9hZ2ROR1UKWkF5NEIva0NnWUVBM0pxaUVIVkVkRUZQOWVEazV2NGNpekZvaE9iU2lhR0t4NzZleEhyRkpzcWczRnRzd3paTwpySytMejVEL2ticU5vL2tVOGtEY2FybEdsaUVpU3M2ZW5idTFsQmR5QmtISFdON2RDOWpnSUNyZnRHUWY4cG5VCitJa3diQlRNYVB0YUpCWndoREZvTnpKYk9vdHVnYmNkYTVxeXhpWVkxakQzWjNzNnI1SWhKS01DZ1lFQTBndUkKd2hhekZrdmNWVklBY2gzL3lKeDF5blhFVkZuMDUxOExLUjl5S1E0YTdyRldwZ3JXZ01JUTFkdzhNcWpDU0JtNgo0MUpqc2RYemdqQ1lXMW1qM1I3N2cwOUtDVDE1WUNhK1FySHpqSndOMmduUEhUR1dvVkhvd0F4ZCt0VHNNbVo0CnZqREt3YTQ2OTFwZXI4QnB4amNQNWpOa2JGb3ZHL21wb09IdG9yTUNnWUVBaTE2MkhLZTVnNmp2bDJ0cHNmWEEKbXIrd1JLWi9SS3htUFNOVXN0VE5VV0NhbUJ5NmJlb1Zja3ZGakhFU3hVS1MwWkUvaG4wcnc5RWhveDl6eHNjYQp0cFFzZDA4SW5xTllDZkZpdldWYTAzZkN0UGk4cGt4Qm5ITXZ3Rml6ZTIrdzF6UEdDZjRjMVNKZk9IRjJjMFQ0CnRVNmF1MHkrVERQTFdma2tibDlueVBrQ2dZQURKMWt1VU5qdmhNUVNJK0VOMVpWNWxaL1BJbVdJUHJHR3A4NnIKRjJYSGFBYlBmcW9tWkJORWE2V0ZFSUYyNFVISmcxbGpBR0d1MGQrT0hOeXN3blBMWmlPd25RZ25pMXkvTE5XKwplcDJGaHZKT1M4ZG9VTTVLTGNpbzJZYXZ0WEsyYndOeEY1cHp2Z0gwcE02M0pOUnh2WEhucXUzZkVwdVNkL1VzCkRUaGNNUUtCZ0Qza0dWanJ4cjM1QkdyM3ZxTjNlZk4xeWJhaHZsVFhSZ05Pb3cxcDNBM0JqL2d5Y25NbHJZdlgKZzc2SG9WbC9GTngxU1JzVHR4WHZ5VXRSY2g3Z1pYQll2bHNuRlZYWXNQUCtCeU1WenRnbmZ0V0w4VWhsY1VQeApjUmx2VzdlZDFQZkxLK2UxOG9mYWZPV05vcnR4UGhjb1pENkJMcFVCRmpZL1V3YktwQWR5Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
	


Create Role and RoleBinding:

kubectl create role developer --verb=create --verb=get --verb=list --verb=update --verb=delete --resource=pods

kubectl create role developer --verb=create --verb=get --verb=list --verb=update --verb=delete --resource=pods --dry-run=client -o yaml > role.yaml


vi role.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: developer-zarah
rules:
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - create
  - get
  - list
  - update
  - delete


kubectl apply -f role.yaml


kubectl create rolebinding developer-binding-myuser --role=developer --user=zarah
kubectl create rolebinding developer-binding-zarah --role=developer --user=zarah --dry-run=client -o yaml > zarah-rb.yaml

vi zarah-rb.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: developer-binding-myuser
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: developer-zarah
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: User
  name: zarah



kubectl apply -f zarah-rb.yaml

root@cka-master:~/zarah# kubectl get role
NAME              CREATED AT
developer-zarah   2023-04-25T07:19:49Z

root@cka-master:~/zarah# kubectl get role,rolebindings
NAME                                             CREATED AT
role.rbac.authorization.k8s.io/developer-zarah   2023-04-25T07:19:49Z

NAME                                                             ROLE                   AGE
rolebinding.rbac.authorization.k8s.io/developer-binding-myuser   Role/developer-zarah   88s




----------------------------------------

zarah@cka-master:~$ kubectl get pods
E0425 07:26:40.203506 3854380 memcache.go:238] couldn't get current server API group list: the server has asked for the client to provide credentials
E0425 07:26:40.204949 3854380 memcache.go:238] couldn't get current server API group list: the server has asked for the client to provide credentials
E0425 07:26:40.206280 3854380 memcache.go:238] couldn't get current server API group list: the server has asked for the client to provide credentials
E0425 07:26:40.208076 3854380 memcache.go:238] couldn't get current server API group list: the server has asked for the client to provide credentials
E0425 07:26:40.209509 3854380 memcache.go:238] couldn't get current server API group list: the server has asked for the client to provide credentials
error: You must be logged in to the server (the server has asked for the client to provide credentials)
